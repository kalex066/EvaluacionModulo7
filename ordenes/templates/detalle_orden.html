{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Detalle de la orden #{{ orden.id }}</h2>

  <p><strong>Usuario:</strong> {{ orden.usuario.username }}</p>
  <p><strong>Fecha:</strong> {{ orden.fecha_creacion|date:"d/m/Y H:i" }}</p>

  {% if orden.items.all %}
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio unitario</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {% for item in orden.items.all %}
      <tr>
        <td>{{ item.producto.nombre }}</td>
        <td>{{ item.cantidad }}</td>
        <td>${{ item.producto.precio }}</td>
        <td>${{ item.producto.precio|floatformat:0|add:item.cantidad|floatformat:0 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <div class="alert alert-info">Esta orden no tiene productos asociados.</div>
  {% endif %}
  <a href="{% url 'ordenes:lista_ordenes' %}" class="btn btn-secondary mt-3">Volver a mis Ã³rdenes</a>
</div>
{% endblock %}